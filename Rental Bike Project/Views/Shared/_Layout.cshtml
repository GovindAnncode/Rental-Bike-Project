@model Rental_Bike_Project.Models.SignUpModel;
@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Mvc
@using Microsoft.AspNetCore.Mvc.Rendering
@using Microsoft.AspNetCore.Mvc.ViewFeatures


<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


   

        <style >
        * {
            margin: 5px;
            box-sizing: border-box;
            font-size:20px;
        }

   
        .navbar {
            margin-bottom: 50px;
            border-radius: 0;
        }

        .jumbotron {
            margin-bottom: 0;
        }

        footer {
            background-color: #f2f2f2;
            padding: 25px;
        }
    </style>
</head>

<body>

    <div class="jumbotron">
        <div class="container text-center">
            <h1>Rental Bikes</h1>
            <p>Mission, Vision & Values</p>
        </div>
    </div>

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>              
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a asp-action="Bikes" asp-controller="User">Bikes</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>                
                </ul>
                <ul class="nav navbar-nav navbar-right">
                               
                    @if(ViewBag.Username ==null)
                    {
                        <li><a href="#"><span class="glyphicon glyphicon-user"></span>Welcome Rental Bike</a></li>
                        <li><a href="#" data-toggle="modal" data-target="#loginModal"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                        <li><a href="#" data-toggle="modal" data-target="#signupModal"><span class="glyphicon glyphicon-user"></span> SignUp</a></li>
                    }
                    else
                    {
                        <li><a href="#"><span class="glyphicon glyphicon-user"></span>Welcome @ViewBag.Username</a></li>
                        <li><a asp-action="Logout" asp-controller="User"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                    }
                    <li><a href="#"><span class="glyphicon glyphicon-shopping-cart"></span> Cart</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Sign Up</h4>
                </div>
                <div class="modal-body">
                    <!-- Your signup form goes here -->
                    <form method="post" id="signupForm">
                        <div class="form-group">
                            <label asp-for="Username">Username:</label>
                            <input asp-for="Username" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label asp-for="MobileNumber">Mobile Number:</label>
                            <input asp-for="MobileNumber" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label asp-for="Email">Email:</label>
                            <input asp-for="Email" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label asp-for="Password">Password:</label>
                            <input asp-for="Password" type="password" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label asp-for="ConfirmPassword">Confirm Password:</label>
                            <input asp-for="ConfirmPassword" type="password" class="form-control" required />
                        </div>

                        <button type="submit" class="btn btn-success">Sign Up</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Login</h4>
                </div>
                <div class="modal-body">
                    <!-- Your login form goes here -->
                    <form id="LoginForm" method="post">
                        <div class="form-group">
                            <label asp-for="Username">Username:</label>
                            <input asp-for="Username" class="form-control" required />
                        </div>

                        <div class="form-group">
                            <label asp-for="Password">Password:</label>
                            <input asp-for="Password" type="password" class="form-control" required />
                        </div>

                        <button type="submit" class="btn btn-primary">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    @* <section>
        <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
            <div class="header carousel-inner ">
                <div class="carousel-item active">
                    <img style="width:1200px; height:480px;" src="~/css/img/slide1.jpeg" class="d-block" alt="...">
                </div>
                <div class="carousel-item" data-bs-interval="2000">
                    <img style="width:1150px; height:450px;" src="~/css/img/slide2.jpeg" class="d-block" alt="...">
                </div>
                <div class="carousel-item">
                    <img style="width:1230px; height:450px;" src="~/css/img/slide3.jpeg" class="d-block" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
                <span class="carousel-control-prev-icon text-black" aria-hidden="true"></span>
                <span class="visually-hidden text-black">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </section>
     *@
    <br>
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <!-- Other content goes here -->

    <footer class="container-fluid text-center">
        <p>Online Store Copyright</p>
        <form class="form-inline">
            Get deals:
            <input type="email" class="form-control" size="50" placeholder="Email Address">
            <button type="button" class="btn btn-danger">Sign Up</button>
        </form>
    </footer>
    <script>

        $('#signupForm').submit(function (event) {
            event.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/User/SignUp',
                data: $(this).serialize(),
                success: function (data) {
                    if (data.success) {
                        debugger;
                       
                        $('#signupForm')[0].reset();

                        $('#signupModal').modal('hide');

                        $('#loginModal').modal('show');
                    } else {

                        console.error('Signup was not successful:', data.message);
                        alert(data.message);
                    }
                },
                error: function (error) {

                    console.error('Error during signup:', error);
                    alert('An error occurred during signup. Please try again.');
                }
            });
        });

        //Login Page

        $('#LoginForm').submit(function (event) {
            event.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/User/Login',
                data: $(this).serialize(),
                success: function (data) {
                    if (data.success) {
                        debugger;
                       
                        $('#loginModal').modal('hide');

                        window.location.href = '/User/Home';
                    } else {

                        console.error('Login was not successful:', data.message);
                        alert(data.message);
                    }
                },
                error: function (error) {

                    console.error('Error during signup:', error);
                    alert('An error occurred during Login Please try again.');
                }
            });
        });

    </script>

</body>


</html>
